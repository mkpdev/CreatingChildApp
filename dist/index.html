<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="cache-control" content="max-age=0"> <meta http-equiv="cache-control" content="no-cache"> <meta http-equiv="expires" content="0"> <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"> <meta http-equiv="pragma" content="no-cache"> <title></title> <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-chart.js/1.1.1/angular-chart.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.4.3/rzslider.min.js"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.4.3/rzslider.css"> <script src="scripts/controllers/main.js"></script> <link rel="stylesheet" href="styles/main.d3f776f3.css"> <style>label{
        font-weight: bold;
        color: #808080;
        font-size: 10px;
      }
      input[type=text]{
        width: 140px;
        height: 40px;
        border-color: #a9a9a9;
        border-radius: 1px;
      }
      .text-al{
        text-align: center;
      }
      .container{
        height: auto;
        width: 80%;
        background-color: #f2f2f2;
        margin-top: 100px;
        border-radius: 1px;
      }
      .row{
        margin: 20px 5px 20px 5px;
        background-color: #e6e6e6;  
        border-radius: 1px;
      }
      .first_row{
        margin-left: 40px;
      }
      .second_row{
        margin-left: 20px;
      }
      .readonly{
        background: none;
      }
      span{
        width: 70px;
      }
      .select-width{
        width: 140px;
        height: 40px;
        background: none;
        border-color: #a9a9a9;
        border-radius: 1px;
      }
      .section{
        padding: 20px 10px 20px 10px;
        width: auto;
        float: left;
        display:inline-block;
      }
      .form-group{
        width: auto;
        float: left;
      }
      .month_sectn{
        margin-left: -11px;
        margin-top: 44px;
      }
      .readonly .month_input{
        width: 80px;
      }
      .dropdown-menu .divider {
        height: 1px;
        margin: 9px 0;
        border-color: #337ab7;
      }
      .inputs{
        margin: 20px 0px 20px 5px;
        width: 550px;
      }
      .menuIcon{
        margin-top: 4px;
        float: left;
      }
      .input_text{
        margin-left: 30px;
      }
      .menuIcon div {
        width: 20px;
        height: 3px;
        background-color: transparent;
        margin: 3px 0;
        border-radius: 2px;
        border: 1px solid #808080;
      }
      .second_row_inputs{
        font-weight: normal;
        font-size: 20px;
      }

      .slidecontainer {
        width: 40%;
        float: left;
        margin: 20px 40px;
      }

      .slider { 
        -webkit-appearance: none;
        width: 60%;
        height: 16px;
        border-radius: 5px;
        background: transparent;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
        border: 1px solid #808080;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 12px;
        border-radius: 50%;
        background: black;
        cursor: pointer;
      }
      .high_slider{
        float: right;
        margin-top: 5px;
      }
      .my-chart{
        margin-top: -40px;
        float: left;
        height: 200px;
        width: 300px;
      }
      .rzslider .rz-pointer {
        top: -6px;
        z-index: 3;
        width: 19px;
        height: 19px;
        cursor: pointer;
        background-color: #9da5b4;
        border-radius: 16px;
      }

      .rzslider .rz-pointer:after { 
      display: none;
      }

      .rzslider .rz-bar {
        background: transparent;
        border: 1px solid #808080;
        height: 10px;
      }

      /*.rz-bar-wrapper .rz-pointer .rz-pointer-min{
        width: 13px;
        height: 13px;
      }*/</style> </head> <body ng-app="myapp"> <div ng-controller="MyController"> <div class="container"> <form> <div class="row"> <div class="first_row"> <div class="form-group"> <div class="section"> <label>Current Date</label> <input type="text" class="form-control readonly" name="currDate" ng-model="myForm.current_date" ng-disabled="!currentDate"> </div> </div> <div class="form-group month_sectn"> <input type="text" class="form-control readonly month_input" name="currMonth" ng-model="myForm.periodicity" ng-disabled="!currMonth"> </div> <div class="form-group"> <div class="section"> <label>Forecast Period</label> <div class="dropdown"> <select class="form-control select-width btn dropdown-toggle" ng-model="myForm.forecast_months" ng-options="obj.id as obj.name for obj in myForm.options"> <option class="dropdown-menu" value="">Select Period</option> </select> </div> </div> </div> <div class="form-group"> <div class="section"> <label>Growth</label> <div class="dropdown"> <select class="form-control select-width btn dropdown-toggle" ng-model="myForm.growth_type" ng-options="grow.id as grow.name for grow in myForm.growth" ng-change="onChange(myForm.growth_type)"> <option class="dropdown-menu" value="">Select Growth</option> </select> </div> </div> </div> <div class="form-group" ng-show="multiplierInpt"> <div class="section"> <label>Multiplier</label> <input type="text" class="form-control" name="multiplier" ng-model="myForm.multiplier"> </div> </div> </div> </div> <div class="row"> <div class="second_row"> <div class="inputs"> <!-- <img ng-src="{{image}}"/> --> <div class="menuIcon"> <div></div> <div></div> <div></div> </div> <div class="input_text"> <label class="second_row_inputs">INPUTS</label> </div> </div> <div class="section"> <div class="form-group"> <label>Timeframe</label> <input type="text" class="form-control" name="timeFrame" ng-model="myForm.timeFrame" placeholder="no. of months"> </div> </div> <div class="slidecontainer"> <rzslider rz-slider-model="slider.minValue" rz-slider-high="slider.maxValue" rz-slider-options="slider.options"></rzslider> <label class="low_slider">Low</label> <label class="high_slider">High</label> </div> <div class="my-chart"> <canvas id="line" class="chart chart-line" chart-data="data" chart-labels="labels" chart-series="series" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick"> </canvas> </div> </div> </div> <button ng-click="save(myForm)">Submit</button> </form> </div> </div> <script>// 'use strict';
  var app = angular.module('myapp', ['chart.js', 'rzModule']);

  app.config(function (ChartJsProvider) {
    ChartJsProvider.setOptions({ 
      colors : [ '#803690', '#00ADF9', '#DCDCDC', '#46BFBD', '#FDB45C', '#949FB1', '#4D5360'],
      tooltipFillColor: '#FFF',
      tooltipFontColor: '#000',
    });
  });

  var myapp = angular.module('myapp');

  myapp.controller("MyController",['$scope', function($scope) {
    $scope.myvalues = {};
    $scope.myForm = {}; 
    $scope.labels =[];
    $scope.currentDate = false;
    $scope.currMonth = false;
    $scope.multiplierInpt = false;
    $scope.image = "menuicon.png";
    $scope.myForm.growth = [
      {id: "linear", name: "Linear" },
      {id: "exponential", name: "Exponential" }
    ];
    $scope.myForm.options = [
      { id : "3mnths", name: "3 Months" },
      { id : "6mnths", name: "6 Months" },
      { id : "12mnths", name: "12 Months" }
    ];

    //get current Date
    $scope.getCurrentDate = function() {
      $scope.dateObj = Date();
      $scope.myForm.current_date = $scope.dateObj.split(" ")[1] + " " + $scope.dateObj.split(" ")[3];
      $scope.myForm.periodicity = "monthly";
    };
    $scope.getCurrentDate();

    //slider configuration
    $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov","Dec"];
    $scope.data = [
      [0, 15, 35, 40, 45, 45, 48, 50, 54, 57, 58, 60, 65]
    ];
    $scope.onClick = function (points, evt) {
      console.log(points, evt);
    };
    $scope.datasetOverride = [
      { 
        fill: true,
        backgroundColor: "rgba(75,192,192,0.4)",
      }
    ];
    $scope.options = {
      tooltips: {
        yAlign: 'bottom'
      },
      scales: {
        yAxes: [
          {
            id: 'y-axis-2',
            type: 'linear',
            display: true,
            position: 'left'
          }
        ]
      }
    };

    //get slider current month value
    $scope.currentMonth = function(){
      $scope.monthObj = $scope.labels.indexOf(Date().split(" ")[1]);
      $scope.minSliderVal = $scope.data[0][$scope.monthObj];
    }
    $scope.currentMonth();

    $scope.myChangeListener = function(sliderId){
      console.log(sliderId, 'has changed with ', $scope.slider.maxValue);
      console.log(sliderId, 'has changed with ', $scope.slider.minValue);
    }

    //slider configuration
    // $scope.priceSlider = 150;
    $scope.slider = {
        minValue: $scope.minSliderVal,
        maxValue: 90,
        options: {
            floor: 0,
            ceil: 100,
            step: 1,
            id: 'sliderA',
            onChange: $scope.myChangeListener
        }
    };

    //the onchange value for growth 
    $scope.onChange = function (gro) {
      if(gro == "exponential"){
        $scope.multiplierInpt = true;
        $scope.myForm.multiplier = "ratio";
      }else{
        $scope.multiplierInpt = false;
      }
    };

    //submit function
    $scope.save = function(mvalues){
      console.log("My Form values", mvalues);
      $scope.multiplierInpt = false;
      if(!mvalues.multiplier){
        $scope.data = [
          [0, 15, 35, 40, 45, 45, 48, 50, 54, 57, 58, 60, 65]
        ];
        if(mvalues.timeFrame){
          if(mvalues.timeFrame == 1){
            $scope.labels = ["Jan"];
            $scope.data[0][0] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 2){
            $scope.labels = ["Jan", "Feb"];
            $scope.data[0][1] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 3){
            $scope.labels = ["Jan", "Feb", "Mar"];
            $scope.data[0][2] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 4){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr"];
            $scope.data[0][3] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 5){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May"];
            $scope.data[0][4] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 6){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June"];
            $scope.data[0][5] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 7){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July"];
            $scope.data[0][6] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 8){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug"];
            $scope.data[0][7] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 9){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep"];
            $scope.data[0][8] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 10){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct"];
            $scope.data[0][9] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 11){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov"];
            $scope.data[0][10] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 12){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
            $scope.data[0][11] = $scope.slider.maxValue;
          }
        }else{
          $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
          $scope.data = [
            [0, 15, 35, 40, 45, 45, 48, 50, 54, 57, 58, 60, 65]
          ];
        }
      }else{
        // $scope.data[1] = [0, 15, 35, 40, 45, 45, 48, 50, 54, 57, 58, 60, 65];
        $scope.numeratr = mvalues.multiplier.split(":")[0];
        $scope.denomintr = mvalues.multiplier.split(":")[1]
        for (var i = 0; i < $scope.data[0].length; i++) {
          $scope.data[0][i] = $scope.data[0][i]*$scope.numeratr/$scope.denomintr;
        }
        if(mvalues.timeFrame){
          if(mvalues.timeFrame == 1){
            $scope.labels = ["Jan"];
            $scope.data[0][0] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 2){
            $scope.labels = ["Jan", "Feb"];
            $scope.data[0][1] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 3){
            $scope.labels = ["Jan", "Feb", "Mar"];
            $scope.data[0][2] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 4){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr"];
            $scope.data[0][3] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 5){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May"];
            $scope.data[0][4] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 6){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June"];
            $scope.data[0][5] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 7){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July"];
            $scope.data[0][6] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 8){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug"];
            $scope.data[0][7] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 9){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep"];
            $scope.data[0][8] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 10){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct"];
            $scope.data[0][9] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 11){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov"];
            $scope.data[0][10] = $scope.slider.maxValue;
          }else if(mvalues.timeFrame == 12){
            $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
            $scope.data[0][11] = $scope.slider.maxValue;
          }
        }else{
          $scope.labels = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
          $scope.data = [
            [0, 15, 35, 40, 45, 45, 48, 50, 54, 57, 58, 60, 65]
          ];
        }
      }

      $scope.myvalues = {growth_types_available: mvalues.growth, forecast_months_available: mvalues.options, 
          current_date: mvalues.current_date, periodicity: mvalues.periodicity, 
          forecast_months: mvalues.forecast_months, growth_type: mvalues.growth_type
      }
      $scope.myForm.multiplier = "";
      $scope.myForm.forecast_months = {};
      $scope.myForm.growth_type = {};
      $scope.myForm.timeFrame = "";
    }
  }]);</script> </body> </html>